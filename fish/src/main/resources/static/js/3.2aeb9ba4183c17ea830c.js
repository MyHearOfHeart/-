webpackJsonp([3],{"8HC2":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),i=a.n(s),n=a("mtWM"),o={name:"charge",inject:["user"],data:function(){return{rules:{oldpass:[{required:!0,message:"密码不能为空",trigger:"blur"}],newpass:[{required:!0,message:"密码不能为空",trigger:"blur"}]},checked:!0,passForm:{oldpass:"",newpass:""},loading:!1,menuIndex:"1",conShow:!0,chShow:!1,rateList:[]}},created:function(){var t=this;n({method:"post",url:"/index?action=getAllComment",data:{uid:this.user.uid},header:{"Content-Type":"application/json"}}).then(function(e){if(e.data.comment){var a=!0,s=!1,n=void 0;try{for(var o,l=i()(e.data.comment);!(a=(o=l.next()).done);a=!0){var r=o.value;t.rateList.unshift({id:r.uid,content:r.text,date:r.time})}}catch(t){s=!0,n=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw n}}}else t.$alert("获取信息失败！","提示",{confirmButtonText:"确定"})}).catch(function(t){})},methods:{handleSelect:function(t){2==t?(this.conShow=!1,this.chShow=!0):(this.conShow=!0,this.chShow=!1)},check:function(t){return!!/^\w{6,18}/.test(t)||(this.$alert("密码格式错误","提示",{confirmButtonText:"确定"}),!1)},change:function(){var t=this;this.check(this.passForm.newpass)&&n({method:"post",url:"/index?action=change",data:{uid:this.user.uid,oldpass:this.passForm.oldpass,newpass:this.passForm.newpass},header:{"Content-Type":"application/json"}}).then(function(e){!1===e.data.result?t.$alert("更改失败！请检查是否输入错误！","提示",{confirmButtonText:"确定"}):t.$alert("更改成功","提示",{confirmButtonText:"确定"})}).catch(function(t){})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-menu",{staticClass:"categories",attrs:{"default-active":t.menuIndex,"active-text-color":"red"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("收到的评论")])]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("修改密码")])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.conShow,expression:"conShow"}],staticClass:"rate-box"},t._l(t.rateList,function(e){return a("div",{key:e.id,staticClass:"rate-item"},[a("div",{staticClass:"top"},[a("img",{staticClass:"image",attrs:{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"}}),t._v(t._s(e.id)+" 用户在 "),a("span",{staticStyle:{"margin-left":"20px",color:"#999"}},[t._v(t._s(e.date))]),t._v("\n              时对您的某个视频发出了评论：\n      ")]),t._v(" "),a("div",{staticStyle:{"padding-right":"15px"}},[t._v("\n        "+t._s(e.content)+"\n      ")])])}),0),t._v(" "),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:t.chShow,expression:"chShow"}],staticClass:"change-container",attrs:{model:t.passForm,rules:t.rules,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"change_title"},[t._v("修改密码")]),t._v(" "),a("el-form-item",{attrs:{prop:"oldpass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"旧密码"},model:{value:t.passForm.oldpass,callback:function(e){t.$set(t.passForm,"oldpass",e)},expression:"passForm.oldpass"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"newpass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"新密码"},model:{value:t.passForm.newpass,callback:function(e){t.$set(t.passForm,"newpass",e)},expression:"passForm.newpass"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"40%",background:"#505458",border:"none"},attrs:{type:"primary"},on:{click:t.change}},[t._v("更改")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("ix8J")},"data-v-b028f9e4",null).exports,c=a("mtWM"),d={name:"upfile",inject:["user"],data:function(){return{fileList:[],fileName:"",files:"",radio:1,videoname:"",text:""}},methods:{beforeUpload:function(t){return t.size/1024/1024<100?(this.fileList.unshift(t),this.files=t,this.fileName=t.name,this.fileName=t.name,!1):(this.$message.error("上传图片大小不能超过 100MB!"),!1)},submitUpload:function(){var t=this;if(""!=this.fileName){""!=this.videoname&&(this.fileName=this.videoname);var e=new FormData,a=this.radio,s=this.text;e.append("file",this.files,this.fileName),c({method:"post",url:"/upfile?uid="+this.user.uid+"&text="+s+"&radio="+a,data:e,header:{"Content-Type":"multipart/form-data"}}).then(function(e){!0===e.data.result?t.$alert("上传成功","提示",{confirmButtonText:"确定"}):t.$alert("上传失败","提示",{confirmButtonText:"确定"})}).catch(function(t){})}else this.$message.warning("请选择要上传的文件！")}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upfile"},[a("el-form",[a("el-form-item",{attrs:{label:""}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"#",accept:"video/*",limit:1,"file-list":t.fileList,"before-upload":t.beforeUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传mp4文件，且不超过100M")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"视频标题"}},[a("el-input",{model:{value:t.videoname,callback:function(e){t.videoname=e},expression:"videoname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"视频简介"}},[a("el-input",{model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"视频类型"}},[a("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:1}},[t._v("动漫")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("电影")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("电视剧")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUpload()}}},[t._v("上传")])],1)],1)],1)},staticRenderFns:[]};var m={props:["user"],components:{upfile:a("VU/8")(d,u,!1,function(t){a("d10S")},"data-v-2fa32bf2",null).exports,charge:r},data:function(){return{tabPosition:"left"}},methods:{}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-tabs",{staticStyle:{height:"600px"},attrs:{"tab-position":this.tabPosition}},[e("el-tab-pane",{attrs:{label:"用户管理"}},[e("charge")],1),this._v(" "),e("el-tab-pane",{attrs:{label:"上传视频"}},[e("upfile")],1)],1)},staticRenderFns:[]},h=a("VU/8")(m,p,!1,null,null,null);e.default=h.exports},d10S:function(t,e){},ix8J:function(t,e){}});
//# sourceMappingURL=3.2aeb9ba4183c17ea830c.js.map